<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Password Protection</title>
</head>
<body>
  <label for="password">Enter Password:</label>
  <input type="password" id="password">
  <button onclick="checkPassword()">Submit</button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script>
    // 请替换为您的加密密钥
    // var encryptionKey = "qwe123..";
    // var fixedIV = CryptoJS.enc.Hex.parse('000102030405060708090a0b0c0d0e0f');
    // var fixedSalt = CryptoJS.enc.Hex.parse('000102030405060708090a0b0c0d0e0f'); 
    var storedEncryptedPassword = "c13256c816ad91d87bb3ffeb0ddbb32536f7097620a752bc7616a390b93771b9";
    
    async function calculateSHA256(input) {
        const encoder = new TextEncoder();
        const data = encoder.encode(input);
        const hashBuffer = await crypto.subtle.digest('SHA-256', data);
        const hashArray = Array.from(new Uint8Array(hashBuffer));
        const hashHex = hashArray.map(byte => byte.toString(16).padStart(2, '0')).join('');
        return hashHex;
    }

    // 例子
    // calculateSHA256("?????????????")
    // .then(hash => {
    //     console.log('SHA-256 哈希值:', hash);
    // })
    // .catch(error => {
    //     console.error('计算哈希值时出错:', error);
    // });

    // 验证密码
    function checkPassword() {
        var enteredPassword = document.getElementById('password').value;
        //   var encryptedEnteredPassword = CryptoJS.AES.encrypt(enteredPassword, encryptionKey, { iv: fixedIV, salt: fixedSalt }).toString();
        var encryptedEnteredPassword;
        calculateSHA256(enteredPassword).then(result => {
            console.log('异步操作完成:', result);
            encryptedEnteredPassword = result;
            // 请替换为您预先加密并存储的密码（这是极其不安全的示例）
            console.log('SHA-256 哈希值:', encryptedEnteredPassword);
            if (encryptedEnteredPassword === storedEncryptedPassword) {
                alert('我从来不用这个密码存钱!');
            } else {
                console.log(encryptedEnteredPassword);
                alert('没有提示!');
            }
        }).catch(error => {
            console.error('发生错误:', error);
        });  
    }
  </script>
</body>
</html>